<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Bet Generator</title>
<style>
body{font-family:Arial;background:#222;color:#fff}
input,select,button,textarea{padding:6px;margin:4px}
textarea{width:100%;height:260px}
button{cursor:pointer}
.manual,.presetBox{display:none}
</style>
</head>
<body>

<h3>BET GENERATOR</h3>

Periode :
<input id="periode" value="352">

<br><br>

Pasaran Mode :
<select id="presetMode" onchange="togglePreset()">
  <option value="on">PRESET ON</option>
  <option value="off">MANUAL</option>
</select>

<div id="manualPasaran">
  Pasaran :
  <input id="pasaranManual" value="HONGKONG">
</div>

<div class="presetBox" id="presetBox">
Preset Pasaran (pisahkan dengan koma):<br>
<input id="customPreset" style="width:90%"
value="SYDNEY,GUANGDONG,SINGAPORE,JEJULOTTO,HONGKONG,MONACO,TURIN">
</div>

<hr>

Mode Bet :
<select id="mode" onchange="toggleManual()">
  <option value="auto">OTOMATIS</option>
  <option value="manual">MANUAL</option>
</select>

Filter Nomor :
<select id="filter">
  <option value="mix">Acak</option>
  <option value="twin">Twin</option>
  <option value="notwin">Non Twin</option>
  <option value="notwin_strict">Non Twin Ketat</option>
</select>

<div class="manual" id="manualBox">
<hr>
4D Line <input id="j4d" type="number" value="3">
Nominal <input id="n4d" type="number" value="100"><br>

3D Line <input id="j3d" type="number" value="3">
Nominal <input id="n3d" type="number" value="100"><br>

2D Line <input id="j2d" type="number" value="3">
Nominal <input id="n2d" type="number" value="100">
</div>

<div id="autoBox">
<hr>
Max Total Bayar
<input id="maxTotal" type="number" value="50000"
step="5000" min="5000" oninput="formatMaxTotal()">
</div>

<br>
<button onclick="generate()">GENERATE</button>
<button onclick="copyHTML()">COPY</button>

<hr>
<textarea id="output"></textarea>

<script>
// ===== PRESET PASARAN =====
let presetIndex=0;
function togglePreset(){
  let on=presetMode.value==="on";
  presetBox.style.display=on?"block":"none";
  manualPasaran.style.display=on?"none":"block";
}
function getPasaran(){
  if(presetMode.value==="off") return pasaranManual.value;
  let list=customPreset.value.split(",").map(p=>p.trim()).filter(p=>p);
  if(!list.length) return "UNKNOWN";
  let p=list[presetIndex];
  presetIndex=(presetIndex+1)%list.length;
  return p;
}

// ===== UI =====
function toggleManual(){
  let m=mode.value==="manual";
  manualBox.style.display=m?"block":"none";
  autoBox.style.display=m?"none":"block";
}

// ===== RANDOM =====
function rand(min,max){return Math.floor(Math.random()*(max-min+1))+min}
function isTwin(n){return /^(\d)\1+$/.test(n)}
function isStrictNonTwin(n){return new Set(n.split("")).size===n.length}

function genNum(len,f){
  while(true){
    let n="";
    for(let i=0;i<len;i++) n+=rand(0,9);
    if(f==="twin" && !isTwin(n)) continue;
    if(f==="notwin" && isTwin(n)) continue;
    if(f==="notwin_strict" && !isStrictNonTwin(n)) continue;
    return n;
  }
}
function genSet(len,c,f){
  let s=new Set();
  while(s.size<c) s.add(genNum(len,f));
  return [...s];
}

// ===== ROW =====
function row(label,nums,nom,line){
  let bayar=nom*line;
  return {
    html:`<tr>
<td align="center">${label}</td>
<td>${nums.join(" , ")} ,</td>
<td align="center">@${nom.toLocaleString()}</td>
<td align="center">0.00%</td>
<td align="center">${nom.toLocaleString()} X ${line} = ${bayar.toLocaleString()}</td>
</tr>`,
    total:bayar
  };
}
function autoRow(label,len){
  let line=rand(3,12);
  let nom=rand(1,30)*100;
  return row(label,genSet(len,line,filter.value),nom,line);
}

// ===== GENERATE =====
function generate(){
  let pas=getPasaran();
  let per=periode.value;
  let rows=[],total=0;

  if(mode.value==="auto"){
    let max=+maxTotal.value;
    while(true){
      let r4=autoRow("4D",4);
      let r3=autoRow("3D",3);
      let r2=autoRow("2D",2);
      total=r4.total+r3.total+r2.total;
      if(total<=max){rows=[r4.html,r3.html,r2.html];break;}
    }
  }else{
    let r4=row("4D",genSet(4,+j4d.value,filter.value),+n4d.value,+j4d.value);
    let r3=row("3D",genSet(3,+j3d.value,filter.value),+n3d.value,+j3d.value);
    let r2=row("2D",genSet(2,+j2d.value,filter.value),+n2d.value,+j2d.value);
    total=r4.total+r3.total+r2.total;
    rows=[r4.html,r3.html,r2.html];
  }

  output.value=`
<div class="panel-">
<h4 class="color-white">
Bet Sukses!!
<font color="orange">Periode ${per} - ${pas}</font>
</h4>
<table class="history">
<tr><th>No</th><th>Tebakan</th><th>Taruhan</th><th>Diskon</th><th>Bayar</th></tr>
${rows.join("")}
<tr><td colspan="4" align="center">Total Bayar Pemain :</td>
<td>${total.toLocaleString()}</td></tr>
</table>
</div>
`.trim();
}

function copyHTML(){
  navigator.clipboard.writeText(output.value);
}

togglePreset();
toggleManual();
</script>

</body>
</html>
function formatMaxTotal(){
  let el = document.getElementById("maxTotal");
  let v = el.value;

  if(v < 1000){
    el.value = v * 1000;
  }else{
    el.value = Math.round(v / 5000) * 5000;
  }
}

