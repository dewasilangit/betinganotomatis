<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Bet Generator Final</title>
<style>
body{font-family:Arial;background:#222;color:#fff}
input,select,button,textarea{padding:6px;margin:4px}
textarea{width:100%;height:300px}
button{cursor:pointer}
.panel{background:#111;padding:10px;border-radius:8px}
</style>
</head>
<body>

<h3>BET GENERATOR FINAL</h3>

<div class="panel">
Pasaran <input id="pasaran" value="TURIN">
Periode <input id="periode" value="492"><br>

Diskon :
<select id="diskonMode">
  <option value="on">ON</option>
  <option value="off">OFF</option>
</select>

Twin Filter :
<select id="twinMode">
  <option value="mix">Campur</option>
  <option value="twin">Twin Saja</option>
  <option value="notwin">Tidak Twin</option>
</select>

<br><br>
<button onclick="generate()">GENERATE</button>
<button onclick="copyHTML()">COPY</button>
</div>

<hr>
<textarea id="output"></textarea>

<script>
function rand(min,max){return Math.floor(Math.random()*(max-min+1))+min}

function genNumber(len,twin){
  while(true){
    let num="";
    for(let i=0;i<len;i++) num+=rand(0,9);
    if(twin==="twin" && !/^(\d)\1+$/.test(num)) continue;
    if(twin==="notwin" && /^(\d)\1+$/.test(num)) continue;
    return num;
  }
}

function genSet(len,count,twin){
  let s=new Set();
  while(s.size<count) s.add(genNumber(len,twin));
  return [...s];
}

function buildRow(label,len,diskon,pengali){
  let line=rand(3,12);
  let nominal=rand(1,10)*100;
  let nums=genSet(len,line,document.getElementById("twinMode").value);

  let bruto=nominal*line*pengali;
  let bayar=diskonOn()
    ? Math.round(bruto*(100-diskon)/100)
    : bruto;

  return {
    total:bayar,
    html:`
<tr>
<td align="center">${label}</td>
<td>${nums.join(" , ")} ,</td>
<td align="center">@${nominal.toLocaleString()}</td>
<td align="center">${diskonOn()?diskon+"%":"0%"}</td>
<td align="center">${nominal.toLocaleString()} X ${line} = ${bayar.toLocaleString()}</td>
</tr>`
  };
}

function diskonOn(){
  return document.getElementById("diskonMode").value==="on";
}

function generate(){
  let p=pasaran.value, per=periode.value;

  let r4=buildRow("4D",4,66.5,3000);
  let r3=buildRow("3D",3,59.5,400);
  let r2=buildRow("2D",2,29.5,70);

  let total=r4.total+r3.total+r2.total;

  output.value=`
<div class="panel-">
<h4 class="color-white">Bet Sukses!!
<font color="orange">Periode ${per} - ${p}</font></h4>
<table class="history">
<tr><th>No</th><th>Tebakan</th><th>Taruhan</th><th>Diskon</th><th>Bayar</th></tr>
${r4.html}${r3.html}${r2.html}
<tr><td colspan="4" align="center">Total Bayar Pemain :</td>
<td>${total.toLocaleString()}</td></tr>
</table></div>
`.trim();
}

function copyHTML(){
  output.select();
  document.execCommand("copy");
  alert("Hasil berhasil di copy");
}
</script>

</body>
</html>
